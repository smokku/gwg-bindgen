<title>Astro</title>
<style>
  html,
  body,
  canvas {
    margin: 0;
    padding: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
    background: black;
  }
</style>

<canvas id="glcanvas" tabindex="1" />

<!-- Minified and statically hosted version of https://github.com/not-fl3/miniquad/blob/master/native/sapp-wasm/js/gl.js -->
<script src="https://not-fl3.github.io/miniquad-samples/gl-0.2.54.js"></script>

<script type="module">
  import * as bg from './target/gwg_bindgen_bg.js'
  console.log(bg)
  miniquad_add_plugin({
    register_plugin (importObject) {
      console.log('register_plugin', importObject)
      importObject.__wbindgen_placeholder__ = {
        ...bg,
        __wbindgen_describe: console.warn,
        __wbindgen_describe_closure: console.warn
      }
      importObject.__wbindgen_externref_xform__ = {
        __wbindgen_externref_table_grow: console.warn,
        __wbindgen_externref_table_set_null: console.warn
      }
    },
    on_init () {
      console.log('on_init', wasm_memory)
      bg.wasm.memory = wasm_memory
    }
  })
  load('./target/wasm32-unknown-unknown/release/gwg_bindgen.wasm')
</script>
